<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Siyah-Beyaz Pop-up Galeri</title>

  <style>
    :root{
      --bg:#000;
      --fg:#fff;
      --muted:#bdbdbd;
      --panel:rgba(255,255,255,0.06);
      --panel2:rgba(255,255,255,0.12);
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      height:100vh;
      display:flex;
      justify-content:center;
      align-items:center;
      background:radial-gradient(circle at 50% 40%, #111, var(--bg));
      color:var(--fg);
      font-family: Arial, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      overflow:hidden;
    }

    .card{
      width:min(620px, 92vw);
      border:1px solid rgba(255,255,255,0.15);
      background:linear-gradient(180deg, var(--panel), rgba(0,0,0,0.55));
      border-radius:18px;
      padding:22px;
      box-shadow:0 20px 60px rgba(0,0,0,0.55);
      text-align:center;
    }

    .title{
      font-size:20px;
      letter-spacing:0.5px;
      margin:0 0 10px;
    }
    .subtitle{
      margin:0 0 18px;
      color:var(--muted);
      font-size:14px;
      line-height:1.45;
    }

    .row{
      display:flex;
      gap:10px;
      justify-content:center;
      flex-wrap:wrap;
    }

    .btn{
      padding:14px 22px;
      font-size:16px;
      cursor:pointer;
      border-radius:12px;
      border:1px solid rgba(255,255,255,0.18);
      background:rgba(255,255,255,0.10);
      color:var(--fg);
      transition:transform .08s ease, background .15s ease, border-color .15s ease;
      user-select:none;
    }
    .btn:hover{ background:rgba(255,255,255,0.16); border-color:rgba(255,255,255,0.28); }
    .btn:active{ transform:scale(0.98); }

    .btn.primary{
      background:linear-gradient(180deg, #fff, #dcdcdc);
      color:#000;
      border-color:transparent;
      font-weight:800;
    }
    .btn.primary:hover{ background:linear-gradient(180deg, #fff, #cfcfcf); }

    /* POPUP */
    .popup{
      display:none;
      position:fixed;
      inset:0;
      background:rgba(0,0,0,0.93);
      justify-content:center;
      align-items:center;
      z-index:999;
      padding:10px;
    }

    .frame{
      position:relative;
      width: min(1100px, 96vw);
      height: min(720px, 86vh);
      border:1px solid rgba(255,255,255,0.18);
      border-radius:18px;
      background:rgba(255,255,255,0.04);
      overflow:hidden;
      box-shadow:0 30px 90px rgba(0,0,0,0.65);
    }

    .topbar{
      position:absolute;
      top:0; left:0; right:0;
      height:52px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:0 14px;
      background:linear-gradient(180deg, rgba(255,255,255,0.10), rgba(255,255,255,0.03));
      border-bottom:1px solid rgba(255,255,255,0.12);
      z-index:3;
      backdrop-filter: blur(6px);
    }

    .badge{
      display:flex;
      gap:10px;
      align-items:center;
      font-size:13px;
      color:var(--muted);
    }

    .dot{
      width:8px;height:8px;border-radius:50%;
      background:#fff;
      box-shadow:0 0 0 2px rgba(255,255,255,0.15);
    }

    .controls{
      display:flex;
      gap:8px;
      align-items:center;
    }

    .iconbtn{
      width:40px; height:36px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.16);
      background:rgba(255,255,255,0.08);
      color:#fff;
      cursor:pointer;
      display:grid;
      place-items:center;
      transition:background .15s ease, border-color .15s ease, transform .08s ease;
      user-select:none;
      font-size:16px;
    }
    .iconbtn:hover{ background:rgba(255,255,255,0.14); border-color:rgba(255,255,255,0.26); }
    .iconbtn:active{ transform:scale(0.98); }

    .canvas{
      position:absolute;
      inset:52px 0 44px 0; /* topbar + footer */
      display:flex;
      align-items:center;
      justify-content:center;
      padding:10px;
      touch-action:pan-y; /* swipe i√ßin yatay algƒ± */
    }

    /* Fade ge√ßi≈ü */
    #photo{
      max-width:100%;
      max-height:100%;
      object-fit:contain;
      opacity:0;
      transition:opacity 650ms ease;
      filter: grayscale(100%);
      will-change: opacity;
      user-select:none;
      -webkit-user-drag:none;
    }
    #photo.show{ opacity:1; }

    /* oklar */
    .arrow{
      position:absolute;
      top:50%;
      transform:translateY(-50%);
      font-size:54px;
      width:64px;height:64px;
      border-radius:16px;
      display:grid;
      place-items:center;
      cursor:pointer;
      user-select:none;
      color:#fff;
      background:rgba(255,255,255,0.08);
      border:1px solid rgba(255,255,255,0.14);
      transition:background .15s ease, transform .15s ease, border-color .15s ease;
      z-index:2;
    }
    .arrow:hover{ background:rgba(255,255,255,0.14); border-color:rgba(255,255,255,0.24); }
    .arrow:active{ transform:translateY(-50%) scale(0.98); }
    .left{ left:12px; }
    .right{ right:12px; }

    .footer{
      position:absolute;
      left:0; right:0; bottom:0;
      height:44px;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      color:var(--muted);
      font-size:13px;
      background:linear-gradient(0deg, rgba(255,255,255,0.08), rgba(255,255,255,0.00));
      border-top:1px solid rgba(255,255,255,0.10);
      z-index:2;
      padding:0 10px;
      text-align:center;
    }

    .pill{
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,0.14);
      background:rgba(255,255,255,0.06);
      white-space:nowrap;
    }

    @media (max-width:520px){
      .arrow{ width:54px;height:54px;font-size:46px; }
      .pill{ font-size:12px; }
    }
  </style>
</head>

<body>
  <div class="card">
    <h1 class="title">Siyah-Beyaz Pop-up Galeri</h1>
    <p class="subtitle">
      ‚ÄúFotoƒüraflarƒ± A√ß‚Äùa basƒ±nca galeri a√ßƒ±lƒ±r. <b>Sonsuz loop</b>, <b>fade</b>, otomatik slayt ve
      üéµ arka plan m√ºziƒüi aktiftir. (M√ºzik tarayƒ±cƒ± kuralƒ± gereƒüi ilk tƒ±klamada ba≈ülar.)
    </p>

    <div class="row">
      <button class="btn primary" onclick="openPopup()">Fotoƒüraflarƒ± A√ß</button>
      <button class="btn" onclick="toggleMusic()">M√ºzik A√ß/Kapat</button>
    </div>
  </div>

  <!-- POPUP -->
  <div class="popup" id="popup" onclick="bgClose(event)">
    <div class="frame" role="dialog" aria-modal="true" onclick="event.stopPropagation()">
      <div class="topbar">
        <div class="badge">
          <span class="dot"></span>
          <span id="counter">1 / 1</span>
          <span class="pill" id="status">LOOP ‚Ä¢ FADE</span>
        </div>
        <div class="controls">
          <button class="iconbtn" title="M√ºzik A√ß/Kapat" onclick="toggleMusic()">‚ô´</button>
          <button class="iconbtn" title="Tam Ekran" onclick="goFullscreen()">‚§¢</button>
          <button class="iconbtn" title="Kapat (Esc)" onclick="closePopup()">‚úï</button>
        </div>
      </div>

      <div class="canvas" id="canvas">
        <span class="arrow left" onclick="prev()">‚Äπ</span>
        <img id="photo" alt="G√∂rsel"/>
        <span class="arrow right" onclick="next()">‚Ä∫</span>
      </div>

      <div class="footer">
        <span class="pill">‚Üê / ‚Üí</span>
        <span class="pill">Swipe</span>
        <span class="pill">Space: Dur/Devam</span>
        <span class="pill">Esc: Kapat</span>
      </div>
    </div>
  </div>

  <!-- Arka plan m√ºziƒüi -->
  <audio id="bgm" loop preload="auto">
    <source src="portakal-soyulur-mu.mp3" type="audio/mpeg">
  </audio>

<script>
  // ‚úÖ FOTOƒûRAF Lƒ∞STESƒ∞ ‚Äî burada ne yazƒ±yorsa repo'da o isimler bire bir olmalƒ±
  // ƒ∞stersen foto1.jpg..foto8.jpg yap (√∂nerilen)
  const photos = [
  "WhatsApp Image 2026-01-05 at 13.28.11.jpegjgdyt.jpeg",
  "sdsfga.jpeg",
  "ssdgs.jpeg",
  "sssss.jpeg",
  "ss.jpeg",
  "WhatsApp Image 2026-01-05 at 13.28.10.jpeg22.jpeg",
  "WhatsApp Image 2026-01-05 at 13.28.10.jpeg",
  "vaclav-cerny-besiktas-formasiyla-5-golunu-att-19385265_amp.webp",
  ];

  // ‚úÖ Ayarlar
  const AUTO_MS = 3000;     // otomatik ge√ßi≈ü s√ºresi
  const FADE_MS = 650;      // CSS ile uyumlu (opacity transition)
  const MUSIC_TARGET_VOL = 0.60; // max ses (0.0 - 1.0)
  const MUSIC_FADE_STEP = 0.02;
  const MUSIC_FADE_INTERVAL = 120;

  let index = 0;
  let autoTimer = null;
  let autoplay = true;

  const popup = document.getElementById("popup");
  const img = document.getElementById("photo");
  const counter = document.getElementById("counter");
  const bgm = document.getElementById("bgm");
  const canvas = document.getElementById("canvas");

  function setCounter(){
    counter.textContent = `${index + 1} / ${photos.length}`;
  }

  function showPhoto(i){
    if (!photos.length) return;

    index = (i + photos.length) % photos.length; // ‚úÖ sonsuz loop
    setCounter();

    img.classList.remove("show");
    setTimeout(() => {
      img.src = photos[index];
      img.onload = () => img.classList.add("show");
    }, 80);
  }

  function startAuto(){
    stopAuto();
    if (!autoplay) return;
    autoTimer = setInterval(() => next(true), AUTO_MS);
  }

  function stopAuto(){
    if (autoTimer) { clearInterval(autoTimer); autoTimer = null; }
  }

  function openPopup(){
    popup.style.display = "flex";
    showPhoto(index);
    autoplay = true;
    startAuto();
    goFullscreen();
    playMusicSafe(true); // ‚úÖ ilk tƒ±klamada m√ºzik + fade-in
  }

  function closePopup(){
    popup.style.display = "none";
    stopAuto();
    stopMusic();
  }

  function bgClose(e){
    closePopup();
  }

  function next(fromAuto=false){
    showPhoto(index + 1);
  }

  function prev(){
    showPhoto(index - 1);
  }

  function goFullscreen(){
    const el = document.documentElement;
    if (el.requestFullscreen) el.requestFullscreen().catch(()=>{});
  }

  function stopMusic(){
    try{
      bgm.pause();
      bgm.currentTime = 0;
    }catch(_){}
  }

  function playMusicSafe(withFade){
    bgm.volume = withFade ? 0 : MUSIC_TARGET_VOL;

    bgm.play().then(() => {
      if (withFade) fadeInMusic();
    }).catch(()=>{});
  }

  function fadeInMusic(){
    let v = bgm.volume || 0;
    const t = setInterval(() => {
      v = Math.min(v + MUSIC_FADE_STEP, MUSIC_TARGET_VOL);
      bgm.volume = v;
      if (v >= MUSIC_TARGET_VOL) clearInterval(t);
    }, MUSIC_FADE_INTERVAL);
  }

  function toggleMusic(){
    if (bgm.paused) playMusicSafe(false);
    else bgm.pause();
  }

  // Klavye kontrolleri
  document.addEventListener("keydown", (e) => {
    if (popup.style.display !== "flex") return;

    if (e.key === "Escape") closePopup();
    if (e.key === "ArrowRight") next();
    if (e.key === "ArrowLeft") prev();

    // Space: otomatik ge√ßi≈ü dur/ba≈ülat
    if (e.key === " "){
      e.preventDefault();
      autoplay = !autoplay;
      if (autoplay) startAuto();
      else stopAuto();
    }
  });

  // Mobil swipe (kaydƒ±rma)
  let startX = null;
  let startY = null;

  canvas.addEventListener("touchstart", (e) => {
    const t = e.touches[0];
    startX = t.clientX;
    startY = t.clientY;
  }, {passive:true});

  canvas.addEventListener("touchend", (e) => {
    if (startX === null || startY === null) return;
    const t = e.changedTouches[0];
    const dx = t.clientX - startX;
    const dy = t.clientY - startY;

    // yatay kaydƒ±rma daha baskƒ±nsa
    if (Math.abs(dx) > 50 && Math.abs(dx) > Math.abs(dy)){
      if (dx < 0) next();
      else prev();
    }

    startX = null;
    startY = null;
  }, {passive:true});

  // ƒ∞lk y√ºklemede (popup kapalƒ±yken) hazƒ±rlƒ±k
  if (photos.length){
    img.src = photos[0];
  }
</script>
</body>
</html>
